/**
 * jQuery CSS Customizable Scrollbar
 *
 * Copyright 2015, Yuriy Khabarov
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * If you found bug, please contact me via email <13real008@gmail.com>
 *
 * Compressed by http://jscompress.com/
 *
 * @author Yuriy Khabarov aka Gromo
 * @version 0.2.10
 * @url https://github.com/gromo/jquery.scrollbar/
 *
 * modified by C3La-NS for ChatX
 * @url https://github.com/C3La-NS/ChatX/
 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):b(a.jQuery)}(this,function(b){"use strict";function c(a){if(f.webkit&&!a)return{height:0,width:0};if(!f.data.outer){var c={border:"none","box-sizing":"content-box",height:"200px",margin:"0",padding:"0",width:"200px"};f.data.inner=b("<div>").css(b.extend({},c)),f.data.outer=b("<div>").css(b.extend({left:"-1000px",overflow:"scroll",position:"absolute",top:"-1000px"},c)).append(f.data.inner).appendTo("body")}return f.data.outer.scrollLeft(1e3).scrollTop(1e3),{height:Math.ceil(f.data.outer.offset().top-f.data.inner.offset().top||0),width:Math.ceil(f.data.outer.offset().left-f.data.inner.offset().left||0)}}function d(){var a=c(!0);return!(a.height||a.width)}function g(a){var b=a.originalEvent;return!(b.axis&&b.axis===b.HORIZONTAL_AXIS)&&!b.wheelDeltaX}var f={data:{index:0,name:"scrollbar"},macosx:/mac/i.test(navigator.platform),mobile:/android|webos|iphone|ipad|ipod|blackberry/i.test(navigator.userAgent),overlay:null,scroll:null,scrolls:[],webkit:/webkit/i.test(navigator.userAgent)&&!/edge\/\d+/i.test(navigator.userAgent)};f.scrolls.add=function(a){this.remove(a).push(a)},f.scrolls.remove=function(a){for(;0<=b.inArray(a,this);)this.splice(b.inArray(a,this),1);return this};var h={autoScrollSize:!0,autoUpdate:!0,debug:!1,disableBodyScroll:!1,duration:200,ignoreMobile:!1,ignoreOverlay:!1,scrollStep:30,showArrows:!1,stepScrolling:!0,scrollx:null,scrolly:null,onDestroy:null,onInit:null,onScroll:null,onUpdate:null},i=function(a){f.scroll||(f.overlay=d(),f.scroll=c(),j(),b(window).resize(function(){var a=!1;if(f.scroll&&(f.scroll.height||f.scroll.width)){var b=c();(b.height!==f.scroll.height||b.width!==f.scroll.width)&&(f.scroll=b,a=!0)}j(a)})),this.container=a,this.namespace=".scrollbar_"+f.data.index++,this.options=b.extend({},h,window.jQueryScrollbarOptions||{}),this.scrollTo=null,this.scrollx={},this.scrolly={},a.data(f.data.name,this),f.scrolls.add(this)};i.prototype={destroy:function(){if(this.wrapper){this.container.removeData(f.data.name),f.scrolls.remove(this);var a=this.container.scrollLeft(),c=this.container.scrollTop();this.container.insertBefore(this.wrapper).css({height:"",margin:"","max-height":""}).removeClass("scroll-content scroll-scrollx_visible scroll-scrolly_visible").off(this.namespace).scrollLeft(a).scrollTop(c),this.scrollx.scroll.removeClass("scroll-scrollx_visible").find("div").andSelf().off(this.namespace),this.scrolly.scroll.removeClass("scroll-scrolly_visible").find("div").andSelf().off(this.namespace),this.wrapper.remove(),b(document).add("body").off(this.namespace),b.isFunction(this.options.onDestroy)&&this.options.onDestroy.apply(this,[this.container])}},init:function(j){var k=this,m=this.container,q=this.containerWrapper||m,l=this.namespace,r=b.extend(this.options,j||{}),c={x:this.scrollx,y:this.scrolly},a=this.wrapper,e={scrollLeft:m.scrollLeft(),scrollTop:m.scrollTop()};if(f.mobile&&r.ignoreMobile||f.overlay&&r.ignoreOverlay||f.macosx&&!f.webkit)return!1;if(a)q.css({height:"auto","margin-right":-1*f.scroll.width+"px","max-height":""});else{if(this.wrapper=a=b("<div>").addClass("scroll-wrapper").addClass(m.attr("class")).css("position","absolute"==m.css("position")?"absolute":"relative").insertBefore(m).append(m),m.is("textarea")&&(this.containerWrapper=q=b("<div>").insertBefore(m).append(m),a.addClass("scroll-textarea")),q.addClass("scroll-content").css({height:"auto","margin-right":-1*f.scroll.width+"px","max-height":""}),m.on("scroll"+l,function(){b.isFunction(r.onScroll)&&r.onScroll.call(k,{maxScroll:c.y.maxScrollOffset,scroll:m.scrollTop(),size:c.y.size,visible:c.y.visible},{maxScroll:c.x.maxScrollOffset,scroll:m.scrollLeft(),size:c.x.size,visible:c.x.visible}),c.x.isVisible&&c.x.scroll.bar.css("left",m.scrollLeft()*c.x.kx+"px"),c.y.isVisible&&c.y.scroll.bar.css("top",m.scrollTop()*c.y.kx+"px")}),a.on("scroll"+l,function(){a.scrollTop(0).scrollLeft(0)}),r.disableBodyScroll){var h=function(a){g(a)?c.y.isVisible&&c.y.mousewheel(a):c.x.isVisible&&c.x.mousewheel(a)};a.on("MozMousePixelScroll"+l,h),a.on("mousewheel"+l,h),f.mobile&&a.on("touchstart"+l,function(a){var c=a.originalEvent.touches&&a.originalEvent.touches[0]||a,d={pageX:c.pageX,pageY:c.pageY},f={left:m.scrollLeft(),top:m.scrollTop()};b(document).on("touchmove"+l,function(a){var b=a.originalEvent.targetTouches&&a.originalEvent.targetTouches[0]||a;m.scrollLeft(f.left+d.pageX-b.pageX),m.scrollTop(f.top+d.pageY-b.pageY),a.preventDefault()}),b(document).on("touchend"+l,function(){b(document).off(l)})})}b.isFunction(r.onInit)&&r.onInit.apply(this,[m])}b.each(c,function(j,e){var o=null,q=1,t="x"===j?"scrollLeft":"scrollTop",h=r.scrollStep,a=function(){var a=m[t]();m[t](a+h),1==q&&a+h>=u&&(a=m[t]()),-1==q&&u>=a+h&&(a=m[t]()),m[t]()==a&&o&&o()},u=0;e.scroll||(e.scroll=k._getScroll(r["scroll"+j]).addClass("scroll-"+j),r.showArrows&&e.scroll.addClass("scroll-element_arrows_visible"),e.mousewheel=function(a){if(!e.isVisible||"x"===j&&g(a))return!0;if("y"===j&&!g(a))return c.x.mousewheel(a),!0;var b=-1*a.originalEvent.wheelDelta||a.originalEvent.detail,d=e.size-e.visible-e.offset;return(0<b&&d>u||0>b&&0<u)&&(u+=b,0>u&&(u=0),u>d&&(u=d),k.scrollTo=k.scrollTo||{},k.scrollTo[t]=u,setTimeout(function(){k.scrollTo&&(m.stop().animate(k.scrollTo,240,"linear",function(){u=m[t]()}),k.scrollTo=null)},1)),a.preventDefault(),!1},e.scroll.on("MozMousePixelScroll"+l,e.mousewheel).on("mousewheel"+l,e.mousewheel).on("mouseenter"+l,function(){u=m[t]()}),e.scroll.find(".scroll-arrow, .scroll-element_track").on("mousedown"+l,function(c){if(1!=c.which)return!0;q=1;var d={eventOffset:c["x"===j?"pageX":"pageY"],maxScrollValue:e.size-e.visible-e.offset,scrollbarOffset:e.scroll.bar.offset()["x"===j?"left":"top"],scrollbarSize:e.scroll.bar["x"===j?"outerWidth":"outerHeight"]()},f=0,g=0;return b(this).hasClass("scroll-arrow")?(q=b(this).hasClass("scroll-arrow_more")?1:-1,h=r.scrollStep*q,u=0<q?d.maxScrollValue:0):(q=d.eventOffset>d.scrollbarOffset+d.scrollbarSize?1:d.eventOffset<d.scrollbarOffset?-1:0,h=Math.round(.75*e.visible)*q,u=d.eventOffset-d.scrollbarOffset-(r.stepScrolling?1==q?d.scrollbarSize:0:Math.round(d.scrollbarSize/2)),u=m[t]()+u/e.kx),k.scrollTo=k.scrollTo||{},k.scrollTo[t]=r.stepScrolling?m[t]()+h:u,r.stepScrolling&&(o=function(){u=m[t](),clearInterval(g),clearTimeout(f),f=0,g=0},f=setTimeout(function(){g=setInterval(a,40)},r.duration+100)),setTimeout(function(){k.scrollTo&&(m.animate(k.scrollTo,r.duration),k.scrollTo=null)},1),k._handleMouseDown(o,c)}),e.scroll.bar.on("mousedown"+l,function(a){if(1!=a.which)return!0;var d=a["x"===j?"pageX":"pageY"],f=m[t]();return e.scroll.addClass("scroll-draggable"),b(document).on("mousemove"+l,function(a){var b=parseInt((a["x"===j?"pageX":"pageY"]-d)/e.kx,10);m[t](f+b)}),k._handleMouseDown(function(){e.scroll.removeClass("scroll-draggable"),u=m[t]()},a)}))}),b.each(c,function(a,b){var d="scroll-scroll"+a+"_visible",e="x"==a?c.y:c.x;b.scroll.removeClass(d),e.scroll.removeClass(d),q.removeClass(d)}),b.each(c,function(c,d){b.extend(d,"x"==c?{offset:parseInt(m.css("left"),10)||0,size:m.prop("scrollWidth"),visible:a.width()}:{offset:parseInt(m.css("top"),10)||0,size:m.prop("scrollHeight"),visible:a.height()})}),this._updateScroll("x",this.scrollx),this._updateScroll("y",this.scrolly),b.isFunction(r.onUpdate)&&r.onUpdate.apply(this,[m]),b.each(c,function(b,c){var e="x"===b?"left":"top",f="x"===b?"outerWidth":"outerHeight",g="x"===b?"width":"height",h=parseInt(m.css(e),10)||0,i=c.size,j=c.visible+h,a=c.scroll.size[f]()+(parseInt(c.scroll.size.css(e),10)||0);r.autoScrollSize&&(c.scrollbarSize=parseInt(a*j/i,10),c.scroll.bar.css(g,c.scrollbarSize+"px")),c.scrollbarSize=c.scroll.bar[f](),c.kx=(a-c.scrollbarSize)/(i-j)||1,c.maxScrollOffset=i-j}),m.scrollLeft(e.scrollLeft).scrollTop(e.scrollTop).trigger("scroll")},_getScroll:function(a){var c={advanced:"<div class=\"scroll-element\"><div class=\"scroll-element_corner\"></div><div class=\"scroll-arrow scroll-arrow_less\"></div><div class=\"scroll-arrow scroll-arrow_more\"></div><div class=\"scroll-element_outer\"><div class=\"scroll-element_size\"></div><div class=\"scroll-element_inner-wrapper\"><div class=\"scroll-element_inner scroll-element_track\"><div class=\"scroll-element_inner-bottom\"></div></div></div><div class=\"scroll-bar\"><div class=\"scroll-bar_body\"><div class=\"scroll-bar_body-inner\"></div></div><div class=\"scroll-bar_bottom\"></div><div class=\"scroll-bar_center\"></div></div></div></div>",simple:"<div class=\"scroll-element\"><div class=\"scroll-element_outer\"><div class=\"scroll-element_size\"></div><div class=\"scroll-element_track\"></div><div class=\"scroll-bar\"></div></div></div>"};return c[a]&&(a=c[a]),a||(a=c.simple),a="string"==typeof a?b(a).appendTo(this.wrapper):b(a),b.extend(a,{bar:a.find(".scroll-bar"),size:a.find(".scroll-element_size"),track:a.find(".scroll-element_track")}),a},_handleMouseDown:function(a,c){var d=this.namespace;return b(document).on("blur"+d,function(){b(document).add("body").off(d),a&&a()}),b(document).on("dragstart"+d,function(a){return a.preventDefault(),!1}),b(document).on("mouseup"+d,function(){b(document).add("body").off(d),a&&a()}),b("body").on("selectstart"+d,function(a){return a.preventDefault(),!1}),c&&c.preventDefault(),!1},_updateScroll:function(g,e){if(!f.webkit)var j=17;else var j=0;var k=this.container,l=this.containerWrapper||k,m="scroll-scroll"+g+"_visible",i="x"===g?this.scrolly:this.scrollx,n=parseInt(this.container.css("x"===g?"left":"top"),10)||0,c=this.wrapper,a=e.size,d=e.visible+n;e.isVisible=1<a-d,e.isVisible?(e.scroll.addClass(m),i.scroll.addClass(m),l.addClass(m)):(e.scroll.removeClass(m),i.scroll.removeClass(m),l.removeClass(m)),"y"===g&&(k.is("textarea")||d>a?l.css({height:d+f.scroll.height+"px","max-height":"none"}):l.css({"max-height":d+f.scroll.height-j+"px"})),(e.size!=k.prop("scrollWidth")||i.size!=k.prop("scrollHeight")||e.visible!=c.width()||i.visible!=c.height()||e.offset!=(parseInt(k.css("left"),10)||0)||i.offset!=(parseInt(k.css("top"),10)||0))&&(b.extend(this.scrollx,{offset:parseInt(k.css("left"),10)||0,size:k.prop("scrollWidth"),visible:c.width()}),b.extend(this.scrolly,{offset:parseInt(k.css("top"),10)||0,size:this.container.prop("scrollHeight"),visible:c.height()}),this._updateScroll("x"===g?"y":"x",i))}};b.fn.scrollbar=function(a,c){return"string"!=typeof a&&(c=a,a="init"),"undefined"==typeof c&&(c=[]),b.isArray(c)||(c=[c]),this.not("body, .scroll-wrapper").each(function(){var d=b(this),e=d.data(f.data.name);(e||"init"===a)&&(e||(e=new i(d)),e[a]&&e[a].apply(e,c))}),this},b.fn.scrollbar.options=h;var j=function(){var a=0,b=0;return function(e){var g,k,l,m,o,q,r;for(g=0;g<f.scrolls.length;g++)m=f.scrolls[g],k=m.container,l=m.options,o=m.wrapper,q=m.scrollx,r=m.scrolly,(e||l.autoUpdate&&o&&o.is(":visible")&&(k.prop("scrollWidth")!=q.size||k.prop("scrollHeight")!=r.size||o.width()!=q.visible||o.height()!=r.visible))&&(m.init(),l.debug&&(window.console&&console.log({scrollHeight:k.prop("scrollHeight")+":"+m.scrolly.size,scrollWidth:k.prop("scrollWidth")+":"+m.scrollx.size,visibleHeight:o.height()+":"+m.scrolly.visible,visibleWidth:o.width()+":"+m.scrollx.visible},!0),b++));clearTimeout(a),a=setTimeout(j,300)}}();!window.angular||function(a){a.module("jQueryScrollbar",[]).provider("jQueryScrollbar",function(){var b=h;return{setOptions:function(c){a.extend(b,c)},$get:function(){return{options:a.copy(b)}}}}).directive("jqueryScrollbar",["jQueryScrollbar","$parse",function(a,b){return{restrict:"AC",link:function(c,d,e){var f=b(e.jqueryScrollbar),g=f(c);d.scrollbar(g||a.options).on("$destroy",function(){d.scrollbar("destroy")})}}}])}(window.angular)});